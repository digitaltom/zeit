(function(t){function e(e){for(var i,r,o=e[0],l=e[1],c=e[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);m&&m(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},s={app:0},n=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/zeit/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var m=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"077e":function(t,e,a){},"19a8":function(t,e,a){"use strict";a("077e")},"1a6c":function(t,e,a){},"25b9":function(t,e,a){},"2ec6":function(t,e,a){t.exports=a.p+"img/line-graph.564d0ec2.svg"},"371b":function(t,e,a){t.exports=a.p+"img/time-slot.9733932c.svg"},"3d70":function(t,e,a){"use strict";a("d034")},"458b":function(t,e,a){"use strict";a("25b9")},"533e":function(t,e,a){t.exports=a.p+"img/circle-with-plus.088ac672.svg"},"56d7":function(t,e,a){"use strict";a.r(e);var i={};a.r(i),a.d(i,"set_timer_config",(function(){return J})),a.d(i,"get_timer_names",(function(){return P}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:"fade"}},[a("keep-alive",[a("router-view")],1)],1)],1)},r=[],o={name:"App",created:function(){var t=JSON.parse(localStorage.getItem("config"));null===t&&(t={}),void 0===t["timers"]&&(t["timers"]={}),localStorage.setItem("config",JSON.stringify(t))}},l=o,c=(a("034f"),a("2877")),m=Object(c["a"])(l,n,r,!1,null,null,null),u=m.exports,d=a("1881"),f=a.n(d),h=a("8c4f"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timers"},[i("h2",[t._v(t._s(t.headline))]),i("router-link",{attrs:{to:{name:"stats",params:{}}}},[i("img",{staticClass:"icon small",attrs:{src:a("2ec6"),alt:"Timer statistics"}})]),i("div",{staticClass:"timer-list flex-center"},[t._l(t.timers,(function(e){return[i("timer",{key:e,attrs:{name:e,date:t.date}})]}))],2),i("div",[i("img",{staticClass:"icon",attrs:{src:a("533e"),alt:"Add Timer"},on:{click:function(e){return t.$modal.show("new")}}})]),i("modal",{attrs:{name:"new",height:"auto",scrollable:!0,adaptive:!0,maxWidth:350,pivotY:.3,classes:"new-timer-modal"}},[i("h2",[t._v("Add Timer")]),i("div",{staticClass:"option"},[i("b",[t._v("Name:")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.new_timer.name,expression:"new_timer.name",modifiers:{trim:!0}}],attrs:{name:"name",maxlength:"40"},domProps:{value:t.new_timer.name},on:{input:function(e){e.target.composing||t.$set(t.new_timer,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),i("div",{staticClass:"option"},[i("b",[t._v("Color:")]),i("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.new_timer.color,expression:"new_timer.color",modifiers:{trim:!0}}],attrs:{name:"color"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.new_timer,"color",e.target.multiple?a:a[0])}}},[i("option",{attrs:{value:"cyan"}},[t._v("Cyan")]),i("option",{attrs:{value:"yellow"}},[t._v("Yellow")]),i("option",{attrs:{value:"red"}},[t._v("Red")]),i("option",{attrs:{value:"orange"}},[t._v("Orange")]),i("option",{attrs:{value:"green"}},[t._v("Green")]),i("option",{attrs:{value:"blue"}},[t._v("Blue")])])]),i("div",{staticClass:"option"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.new_timer.stats,expression:"new_timer.stats",modifiers:{trim:!0}}],attrs:{type:"checkbox",name:"stats",id:"form-stats"},domProps:{checked:Array.isArray(t.new_timer.stats)?t._i(t.new_timer.stats,null)>-1:t.new_timer.stats},on:{change:function(e){var a=t.new_timer.stats,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,r=t._i(a,n);i.checked?r<0&&t.$set(t.new_timer,"stats",a.concat([n])):r>-1&&t.$set(t.new_timer,"stats",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.new_timer,"stats",s)}}}),i("label",{attrs:{for:"form-stats"}},[t._v("Collect statistics for this timer")])]),i("div",{staticClass:"option"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.new_timer.default,expression:"new_timer.default",modifiers:{trim:!0}}],attrs:{type:"checkbox",name:"default",id:"form-default"},domProps:{checked:Array.isArray(t.new_timer.default)?t._i(t.new_timer.default,null)>-1:t.new_timer.default},on:{change:function(e){var a=t.new_timer.default,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,r=t._i(a,n);i.checked?r<0&&t.$set(t.new_timer,"default",a.concat([n])):r>-1&&t.$set(t.new_timer,"default",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.new_timer,"default",s)}}}),i("label",{attrs:{for:"form-default"}},[t._v("Add timer by default each day")])]),i("button",{on:{click:function(e){t.$modal.hide("new"),t.addTimer()}}},[t._v(" Add Timer ")])])],1)},g=[],v=(a("ac1f"),a("1276"),a("b0c0"),a("caad"),a("2532"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timer",class:this.state+" "+this.config["color"]},[i("div",{staticClass:"timer-name"},[t._v(t._s(t.name))]),i("div",{staticClass:"timer-duration"},[t._v(t._s(t.duration))]),i("div",{staticClass:"controls"},[i("span",{on:{click:this.toggleStart}},["running"==this.state?[i("img",{staticClass:"icon",attrs:{src:a("644b"),alt:"Pause timer"}})]:[i("img",{staticClass:"icon",attrs:{src:a("dab1"),alt:"Start timer"}})]],2),t._m(0),i("modal",{attrs:{name:"configure",height:"auto",scrollable:!0,adaptive:!0,maxWidth:400,pivotY:.3,classes:"configure-timer-modal"}},[i("h2",[t._v("Configure Timer")]),i("div",{staticClass:"option"},[i("b",[t._v("Name:")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:this.name,expression:"this.name",modifiers:{trim:!0}}],attrs:{name:"name",maxlength:"40"},domProps:{value:this.name},on:{input:function(e){e.target.composing||t.$set(this,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),i("div",{staticClass:"option"},[i("b",[t._v("Color:")]),i("select",{attrs:{name:"color"}},[i("option",{attrs:{value:"cyan"}},[t._v("Cyan")]),i("option",{attrs:{value:"yellow"}},[t._v("Yellow")]),i("option",{attrs:{value:"red"}},[t._v("Red")]),i("option",{attrs:{value:"orange"}},[t._v("Orange")]),i("option",{attrs:{value:"green"}},[t._v("Green")]),i("option",{attrs:{value:"blue"}},[t._v("Blue")])])]),i("div",{staticClass:"option"},[i("input",{attrs:{type:"checkbox",name:"stats",id:"form-stats"}}),i("label",{attrs:{for:"form-stats"}},[t._v("Collect statistics for this timer")])]),i("div",{staticClass:"option"},[i("input",{attrs:{type:"checkbox",name:"default",id:"form-default"}}),i("label",{attrs:{for:"form-default"}},[t._v("Add timer by default each day")])]),i("button",{on:{click:function(e){t.$modal.hide("configure"),t.addTimer()}}},[t._v(" Change Timer ")])])],1)])}),_=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{staticClass:"icon small settings",attrs:{src:a("e114"),alt:"Timer settings"}})])}],w=(a("99af"),{name:"Timer",props:{name:String,date:String},data:function(){return{state:"new",config:{},duration:"00:00:00",timer:void 0,stages:[]}},computed:{},created:function(){this.loadStages(),this.loadConfig(),this.updateDuration(),"running"==this.state&&(this.timer=setInterval(this.updateDuration,500))},methods:{toStorage:function(){var t=JSON.parse(localStorage.getItem(this.date));t[this.name]=this.stages,localStorage.setItem(this.date,JSON.stringify(t)),console.log("Storing "+this.date+"/"+this.name+", stages: "+JSON.stringify(t[this.name]))},loadStages:function(){var t=localStorage.getItem(this.date);null!==t&&JSON.parse(t)[this.name]&&(this.stages=JSON.parse(t)[this.name]),this.setState(),console.log('Loaded stages for "'+this.name+'": '+JSON.stringify(this.stages))},loadConfig:function(){var t=JSON.parse(localStorage.getItem("config"));void 0!==t["timers"][this.name]&&(this.config=t["timers"][this.name]),console.log('Loaded config for "'+this.name+'": '+JSON.stringify(this.config))},setState:function(){0===this.stages.length?this.state="new":void 0===this.stages[this.stages.length-1]["end_at"]?this.state="running":this.state="pause"},getTotalDuration:function(){return parseInt(this.stages.reduce((function(t,e){var a=void 0===e["end_at"]?(new Date).getTime():e["end_at"],i=a-e["start_at"];return t+i}),0)/1e3)},updateDuration:function(){var t=this.getTotalDuration(),e=Math.floor(t/3600),a=Math.floor(t/60)%60,i=Math.floor(t%60);this.duration="".concat(this.padTime(e),":").concat(this.padTime(a),":").concat(this.padTime(i))},toggleStart:function(){"new"==this.state||"pause"==this.state?(this.stages.push({start_at:(new Date).getTime()}),this.timer=setInterval(this.updateDuration,500)):"running"==this.state&&(clearInterval(this.timer),this.stages[this.stages.length-1]["end_at"]=(new Date).getTime()),this.setState(),this.toStorage()},padTime:function(t){return(t<10?"0":"")+t},showSettings:function(){this.$modal.show("settings")}}}),b=w,y=(a("a908"),Object(c["a"])(b,v,_,!1,null,"d9f9dd5a",null)),S=y.exports,O={name:"Timers",components:{Timer:S},props:{date:{type:String,default:(new Date).toISOString().split("T")[0]}},data:function(){return{timers:[],new_timer:{color:"cyan"},headline:"Todays Timers"}},created:function(){this.date!==(new Date).toISOString().split("T")[0]&&(this.headline="Timers for "+this.date),this.clearAllTimeouts(),this.timers=this.$storage.get_timer_names(this.date),0===this.timers.length&&this.timers.push(" ")},methods:{clearAllTimeouts:function(){var t=window.setTimeout((function(){}),0);while(t--)window.clearTimeout(t)},addTimer:function(){void 0===this.new_timer.name&&(this.new_timer.name=" "),this.$storage.set_timer_config(this.new_timer.name,{color:this.new_timer.color,stats:this.new_timer.stats,default:this.new_timer.default}),this.timers.includes(this.new_timer.name)||this.timers.push(this.new_timer.name)}}},T=O,x=(a("19a8"),a("458b"),Object(c["a"])(T,p,g,!1,null,"155c9504",null)),C=x.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"stats"},[i("h2",[t._v("Statistics")]),i("router-link",{attrs:{to:{name:"timers",params:{date:"2020-06-06"}}}},[i("img",{staticClass:"icon small",attrs:{src:a("371b"),alt:"Timers"}})]),i("div",{staticClass:"chart center"},[i("chartist",{attrs:{ratio:"ct-major-tenth",type:"Bar",data:t.chartData,options:t.chartOptions}})],1)],1)},k=[],N=(a("4de4"),a("b64b"),a("466d"),a("159b"),a("4e82"),{name:"Stats",props:{},data:function(){return{stats:{},chartData:{labels:[],series:[[5,4,3,7,5,10,3],[3,2,9,5,4,6,4]]},chartOptions:{seriesBarDistance:10,reverseData:!0,horizontalBars:!0,axisY:{offset:70}}}},created:function(){var t=this,e=Object.keys(localStorage).filter((function(t){return t.match(/\d+-\d+-\d+/)}));e.sort().forEach((function(e){t.chartData["labels"].push(e)}))}}),D=N,j=(a("3d70"),a("de5d"),Object(c["a"])(D,$,k,!1,null,"ea237eb6",null)),A=j.exports;s["a"].use(h["a"]);var I=new h["a"]({mode:"hash",routes:[{path:"/stats",name:"stats",component:A},{path:"/:date?",name:"timers",component:C,props:!0}],scrollBehavior:function(t){if(t.hash)return{selector:t.hash,offset:{x:0,y:10}}}});function J(t,e){var a=JSON.parse(localStorage.getItem("config"));void 0===a["timers"][t]&&(a["timers"][t]={}),a["timers"][t]=Object.assign({},a["timers"][t],e),localStorage.setItem("config",JSON.stringify(a))}function P(t){return null===localStorage.getItem(t)&&localStorage.setItem(t,JSON.stringify({})),Object.keys(JSON.parse(localStorage.getItem(t)))}s["a"].config.productionTip=!1,s["a"].prototype.$storage=i,s["a"].use(f.a),s["a"].use(a("84b5"),{messageNoData:"You have not enough data",classNoData:"empty"}),new s["a"]({render:function(t){return t(u)},router:I}).$mount("#app")},"644b":function(t,e,a){t.exports=a.p+"img/pause.f697b404.svg"},"85ec":function(t,e,a){},a908:function(t,e,a){"use strict";a("1a6c")},d034:function(t,e,a){},dab1:function(t,e,a){t.exports=a.p+"img/play.8a3085da.svg"},de5d:function(t,e,a){"use strict";a("fdb1")},e114:function(t,e,a){t.exports=a.p+"img/sound-mix.d4e02fd3.svg"},fdb1:function(t,e,a){}});
//# sourceMappingURL=app.aff29ca3.js.map